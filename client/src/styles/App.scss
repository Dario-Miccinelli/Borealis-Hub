
// Utilities
$surface-border: 1px solid var(--border);
@mixin surface { background: var(--card); border: $surface-border; }
@mixin btn-base { display: inline-flex; align-items: center; gap: .4rem; padding: .5rem .8rem; @include surface; border-radius: 10px; color: var(--fg); cursor: pointer; }

// Layout
.page-bg {
  position: fixed; inset: 0; z-index: -1;
  background:
    radial-gradient(1000px 600px at -10% -10%, #0ea5e933, transparent 60%),
    radial-gradient(800px 500px at 110% -20%, #a78bfa33, transparent 60%),
    linear-gradient(var(--bg), var(--bg));
}

.page { max-width: 1100px; margin: 0 auto; padding: 1.25rem; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color: var(--fg) }

.topbar { display: flex; gap: .75rem; align-items: center; justify-content: space-between; margin-bottom: .75rem; flex-wrap: wrap }

.brand {
  display: flex; align-items: baseline; gap: .6rem;
  .dot { width: .6rem; height: .6rem; border-radius: 999px; background: #0ea5e9; box-shadow: 0 0 0 3px #bae6fd }
  h1 { margin: 0; font-size: 1.4rem }
}

.subtitle { color: var(--muted); font-size: .9rem }
.actions { display: flex; align-items: center; gap: .5rem; flex-wrap: wrap }
.chips { display: flex; gap: .35rem; flex-wrap: wrap }
.chip { @include surface; border-radius: 999px; padding: .35rem .6rem; color: var(--fg); cursor: pointer }

.city { position: relative }
.city input { padding: .45rem .55rem; border: $surface-border; border-radius: 8px; min-width: 16rem; background: var(--card); color: var(--fg) }

.dropdown { position: absolute; top: 110%; left: 0; right: 0; @include surface; border-radius: 8px; box-shadow: 0 6px 18px rgba(15,23,42,.08); z-index: 10; overflow: hidden;
  button { width: 100%; text-align: left; padding: .5rem .6rem; background: transparent; color: var(--fg); border: 0; border-bottom: 1px solid var(--border);
    &:last-child { border-bottom: 0 }
    &:hover { background: #f8fafc }
  }
}

input { padding: .45rem .55rem; border: $surface-border; border-radius: 8px; min-width: 8.5rem; background: var(--card); color: var(--fg) }
button { @include btn-base }
button.primary { background: #0ea5e9; color: #fff; border-color: #0ea5e9 }
button.ghost { background: var(--card) }
button:disabled { opacity: .6; cursor: default }

// Flex sections
.metrics { display: flex; flex-wrap: wrap; gap: .75rem; margin: .75rem 0 0 }
.metric { @include surface; border-radius: 12px; padding: .6rem .8rem; flex: 1 1 220px; min-width: 180px;
  .m-title { font-size: .75rem; color: var(--muted) }
  .m-value { font-weight: 700; font-size: 1.05rem; margin-top: .15rem }
}

.content { display: flex; flex-wrap: wrap; gap: 1rem; margin-top: .5rem }
.card { @include surface; border-radius: 14px; padding: 1rem; backdrop-filter: blur(6px); flex: 1 1 300px; display: flex; flex-direction: column }
.card.highlight { flex: 2 1 560px }
.card-head { display: flex; align-items: baseline; justify-content: space-between; margin-bottom: .5rem }
.title { font-weight: 600; color: var(--fg) }
.muted { color: var(--muted) }
.centerbox { flex: 1; display: grid; place-items: center; min-height: 280px }
.nd { font-size: 1.2rem; color: #94a3b8 }

.cloudbox { display: grid; gap: .5rem; align-content: start }
.status { display: inline-flex; align-items: center; gap: .4rem; font-weight: 600 }
.status.ok { color: #16a34a }
.status.warn { color: #b45309 }
.bar { height: 10px; background: #e2e8f0; border-radius: 999px; overflow: hidden }
.fill { height: 100%; background: linear-gradient(90deg, #22c55e, #16a34a); transition: width .4s ease }
.meta { list-style: none; padding: 0; margin: 0; display: grid; gap: .35rem }
.meta strong { color: var(--fg) }
.links { margin-top: .6rem; display: flex; align-items: center; gap: .4rem }
.error { color: #b00020; margin-top: 1rem }
.spinner { width: 46px; height: 46px; border-radius: 999px; border: 4px solid #e2e8f0; border-top-color: #0ea5e9; animation: spin 1s linear infinite }
@keyframes spin { to { transform: rotate(360deg) } }

@media (max-width: 960px) { .card.highlight { flex-basis: 100% } }
@media (max-width: 640px) { .actions { justify-content: flex-start } .card { flex-basis: 100% } }

// Dark mode extras
body.dark .page-bg {
  background:
    radial-gradient(1000px 600px at -10% -10%, #0ea5e933, transparent 60%),
    radial-gradient(800px 500px at 110% -20%, #6d28d933, transparent 60%),
    linear-gradient(#0b1020, #0f172a);
}
body.dark input::placeholder { color: #64748b }
body.dark .dropdown button:hover { background: #111827 }
body.dark button.ghost { background: #0f172a; color: #e5e7eb; border-color: #243045 }
body.dark a { color: #38bdf8 }
